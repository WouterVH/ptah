<div class="page-header">
  <h1>${context.__name__} <small>size: ${view.size}</small></h1>
</div>

<div class="row">
  <div class="span16 columns">
    <tal:block tal:condition="not view.size">
      Table is empty.
    </tal:block>

    <form method="post" action="${request.url}" tal:condition="view.size">
      <table class="zebra-striped">
	<tr>
	  <th>&nbsp;</th>
	  <th tal:repeat="c view.table.columns">
	    ${c.name}
	  </th>
	  <th>&nbsp;</th>
	</tr>
	<tr tal:repeat="row view.data">
	  <td>
	    <input type="checkbox" name="rowid" 
		   value="${getattr(row, view.primary)}" />
	  </td>
	  <td tal:repeat="val row" tal:content="val"></td>
	  <td>
	    <a class="btn info"
	       href="${getattr(row, view.primary)}/index.html">Edit</a>
	  </td>
	</tr>
      </table>

      <div class="pagination" tal:condition="len(view.pages)>1">
	<ul>
	  <li class="${'prev' if view.prev else 'prev disabled'}">
	    <a href="?batch=${view.prev}">&larr; Previous</a>
	  </li>
	  
	  <tal:block repeat="idx view.pages">
	    <li tal:define="klass '' if idx else 'disabled'"
		tal:attributes="class 'active' if idx==view.current else klass">
	      <a href="?batch=${idx}">${idx if idx else '...'}</a>
	    </li>
	  </tal:block>
	  
	  <li class="${'next' if view.next else 'next disabled'}">
	    <a href="?batch=${view.next}">
	      Next &rarr;
	    </a>
	  </li>
	</ul>
      </div>

      <tal:block condition="view.size"
	         content="structure view.pagelet('form-actions', view)" />
    </form>
  </div>
</div>
